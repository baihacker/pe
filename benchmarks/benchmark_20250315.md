# Test Environment

* Date: 2025.03.15
* OS:  Win11 Pro 24H2 (26100.3476)
* CPU: [i9-14900K](https://www.intel.com/content/www/us/en/products/sku/236773/intel-core-i9-processor-14900k-36m-cache-up-to-6-00-ghz/specifications.html)
* Compiler: gcc version 14.1.0 (Rev3, Built by MSYS2 project)
* Msys2: msys2-x86_64-20240507
* Build:
  * [Build and use pe's dependent libraries](https://github.com/baihacker/pe/blob/master/libraries_on_win64.md#build-and-use-pes-dependent-libraries)
  * Build test target:
  > -o a.exe --std=c++20 -fno-diagnostics-color -O3 -march=native -mtune=native -fopenmp -static -Wl,--stack,268435456 -lbf -lgmpxx -lflint -lmpfr -lntl -lgmp -lprimesieve -lprimecount -lzmq -lquadmath

# PolyMul benchmark
* Test code: [Poly mul test](https://github.com/baihacker/pe/blob/master/test/poly_mul_test.c)

## Test result

### Openmp enabled
```cpp
Begin poly_mul_test.c PolyMulTest
config   : data = random, size = 1, n = 1000000, mod = 100019
flint n  : 0.173
flint p  : 0.171
ntt32 s  : 0.351
ntt32 l  : 0.411
ntt64 s  : 0.281
ntt64 l  : 0.394
Min_25 s : 0.064
Min_25 l : 0.079
libbf    : 0.398
ntl lm   : 0.342
ntl      : 0.129
config   : data = random, size = 3, n = 1479725, mod = 100000000003
flint n  : 0.548
flint p  : 0.542
ntt32 l  : 0.866
ntt64 l  : 0.767
Min_25 l : 0.175
libbf    : 0.619
ntl lm   : 0.715
ntl      : 0.704
config   : data = random, size = 4, n = 1000000, mod = 316227766016779
flint n  : 0.336
flint p  : 0.347
ntt64 l  : 0.380
Min_25 l : 0.084
libbf    : 0.390
ntl lm   : 0.510
ntl      : 0.504
config   : data = max mod, size = 1, n = 999996, mod = 1000003
flint n  : 0.175
flint p  : 0.173
ntt32 s  : 0.309
ntt32 l  : 0.357
ntt64 s  : 0.254
ntt64 l  : 0.326
Min_25 s : 0.054
Min_25 l : 0.079
libbf    : 0.380
ntl lm   : 0.331
ntl      : 0.127
config   : data = max mod, size = 3, n = 1479725, mod = 100000000003
flint n  : 0.552
flint p  : 0.552
ntt32 l  : 0.754
ntt64 l  : 0.729
Min_25 l : 0.159
libbf    : 0.630
ntl lm   : 0.678
ntl      : 0.679
config   : data = max mod, size = 4, n = 1000000, mod = 316227766016779
flint n  : 0.347
flint p  : 0.347
ntt64 l  : 0.335
Min_25 l : 0.082
libbf    : 0.392
ntl lm   : 0.482
ntl      : 0.487
End PolyMulTest
Time usage 0:00:00:20.473

Begin poly_mul_test.c PolyMulPerformanceTest
mod = 100019
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.000  0.000  0.000  0.016  0.006  0.003  0.030  0.079  0.175
flint p  0.000  0.000  0.000  0.000  0.009  0.005  0.014  0.026  0.031  0.082  0.171
ntt32 s  0.016  0.000  0.000  0.005  0.002  0.014  0.005  0.048  0.089  0.193  0.348
ntt32 l  0.000  0.000  0.000  0.000  0.000  0.016  0.016  0.052  0.111  0.221  0.423
ntt64 s  0.000  0.003  0.000  0.000  0.000  0.016  0.025  0.041  0.064  0.155  0.294
ntt64 l  0.000  0.000  0.000  0.008  0.006  0.009  0.016  0.050  0.094  0.207  0.385
Min_25 s 0.000  0.000  0.000  0.000  0.000  0.011  0.000  0.000  0.018  0.030  0.063
Min_25 l 0.000  0.000  0.000  0.000  0.007  0.000  0.006  0.023  0.016  0.035  0.098
libbf    0.000  0.000  0.000  0.005  0.006  0.000  0.028  0.038  0.092  0.191  0.398
ntl lm   0.000  0.015  0.000  0.004  0.007  0.001  0.034  0.053  0.083  0.158  0.351
ntl      0.000  0.000  0.000  0.000  0.000  0.010  0.000  0.017  0.031  0.052  0.131
mod = 1000003
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.000  0.000  0.000  0.000  0.022  0.018  0.032  0.094  0.165
flint p  0.000  0.000  0.000  0.000  0.000  0.000  0.008  0.016  0.032  0.084  0.172
ntt32 s  0.000  0.008  0.000  0.000  0.000  0.016  0.015  0.032  0.095  0.189  0.366
ntt32 l  0.016  0.000  0.000  0.000  0.000  0.008  0.013  0.048  0.111  0.227  0.404
ntt64 s  0.000  0.000  0.000  0.008  0.000  0.016  0.016  0.032  0.080  0.142  0.307
ntt64 l  0.000  0.000  0.000  0.007  0.007  0.009  0.021  0.032  0.094  0.206  0.386
Min_25 s 0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.015  0.016  0.064
Min_25 l 0.000  0.000  0.000  0.000  0.000  0.016  0.000  0.012  0.013  0.047  0.079
libbf    0.000  0.006  0.000  0.000  0.000  0.016  0.016  0.047  0.096  0.173  0.382
ntl lm   0.000  0.000  0.000  0.000  0.018  0.011  0.023  0.026  0.073  0.160  0.335
ntl      0.000  0.000  0.000  0.000  0.005  0.004  0.000  0.016  0.032  0.065  0.127
mod = 1000000007
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.000  0.000  0.000  0.000  0.008  0.022  0.064  0.157  0.271
flint p  0.000  0.000  0.000  0.000  0.000  0.000  0.011  0.025  0.051  0.148  0.274
ntt32 l  0.000  0.000  0.000  0.010  0.006  0.009  0.010  0.030  0.089  0.222  0.421
ntt64 l  0.000  0.005  0.000  0.004  0.006  0.009  0.014  0.048  0.095  0.206  0.380
Min_25 l 0.000  0.000  0.000  0.000  0.000  0.000  0.009  0.016  0.016  0.042  0.084
libbf    0.000  0.000  0.000  0.000  0.012  0.016  0.025  0.047  0.096  0.194  0.398
ntl lm   0.000  0.000  0.000  0.016  0.000  0.006  0.030  0.038  0.069  0.177  0.350
ntl      0.000  0.000  0.000  0.000  0.011  0.003  0.007  0.016  0.031  0.064  0.144
mod = 100000000003
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.000  0.000  0.000  0.016  0.013  0.018  0.056  0.169  0.374
flint p  0.000  0.000  0.000  0.000  0.012  0.006  0.006  0.027  0.058  0.178  0.379
ntt32 l  0.000  0.000  0.006  0.002  0.008  0.010  0.012  0.032  0.097  0.232  0.398
ntt64 l  0.000  0.000  0.000  0.000  0.011  0.016  0.018  0.031  0.079  0.191  0.387
Min_25 l 0.000  0.000  0.000  0.000  0.000  0.000  0.015  0.020  0.032  0.047  0.086
libbf    0.000  0.000  0.000  0.009  0.000  0.016  0.032  0.047  0.079  0.195  0.394
ntl lm   0.000  0.000  0.016  0.000  0.000  0.000  0.031  0.063  0.126  0.237  0.489
ntl      0.000  0.000  0.000  0.000  0.016  0.016  0.031  0.049  0.110  0.238  0.489
mod = 316227766016779
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.000  0.000  0.000  0.016  0.016  0.031  0.079  0.173  0.348
flint p  0.000  0.000  0.000  0.000  0.000  0.016  0.016  0.031  0.079  0.175  0.363
ntt64 l  0.000  0.000  0.000  0.000  0.016  0.016  0.018  0.031  0.084  0.213  0.361
Min_25 l 0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.019  0.037  0.076
libbf    0.000  0.000  0.000  0.000  0.000  0.016  0.016  0.047  0.093  0.194  0.401
ntl lm   0.000  0.000  0.000  0.010  0.007  0.015  0.031  0.060  0.129  0.264  0.525
ntl      0.000  0.000  0.000  0.000  0.000  0.014  0.036  0.064  0.122  0.257  0.551
End PolyMulPerformanceTest
Time usage 0:00:00:34.255
time usage: 0:00:00:55.070
```

### Openmp disabled (option "-fopenmp" removed)
```cpp
Begin poly_mul_test.c PolyMulTest
config   : data = random, size = 1, n = 1000000, mod = 100019
flint n  : 0.189
flint p  : 0.174
ntt32 s  : 0.747
ntt32 l  : 1.129
ntt64 s  : 0.400
ntt64 l  : 0.791
Min_25 s : 0.064
Min_25 l : 0.144
libbf    : 0.395
ntl lm   : 0.335
ntl      : 0.144
config   : data = random, size = 3, n = 1479725, mod = 100000000003
flint n  : 0.543
flint p  : 0.534
ntt32 l  : 2.477
ntt64 l  : 1.714
Min_25 l : 0.302
libbf    : 0.621
ntl lm   : 0.713
ntl      : 0.698
config   : data = random, size = 4, n = 1000000, mod = 316227766016779
flint n  : 0.351
flint p  : 0.332
ntt64 l  : 0.810
Min_25 l : 0.159
libbf    : 0.398
ntl lm   : 0.523
ntl      : 0.523
config   : data = max mod, size = 1, n = 999996, mod = 1000003
flint n  : 0.175
flint p  : 0.174
ntt32 s  : 0.540
ntt32 l  : 0.841
ntt64 s  : 0.302
ntt64 l  : 0.620
Min_25 s : 0.064
Min_25 l : 0.143
libbf    : 0.397
ntl lm   : 0.334
ntl      : 0.126
config   : data = max mod, size = 3, n = 1479725, mod = 100000000003
flint n  : 0.525
flint p  : 0.538
ntt32 l  : 1.905
ntt64 l  : 1.380
Min_25 l : 0.301
libbf    : 0.635
ntl lm   : 0.667
ntl      : 0.665
config   : data = max mod, size = 4, n = 1000000, mod = 316227766016779
flint n  : 0.339
flint p  : 0.345
ntt64 l  : 0.617
Min_25 l : 0.158
libbf    : 0.397
ntl lm   : 0.479
ntl      : 0.493
End PolyMulTest
Time usage 0:00:00:28.811

Begin poly_mul_test.c PolyMulPerformanceTest
mod = 100019
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.000  0.000  0.000  0.002  0.014  0.022  0.032  0.095  0.174
flint p  0.000  0.000  0.000  0.000  0.016  0.000  0.016  0.001  0.028  0.082  0.175
ntt32 s  0.000  0.000  0.000  0.000  0.016  0.018  0.024  0.079  0.157  0.333  0.747
ntt32 l  0.000  0.000  0.008  0.000  0.012  0.024  0.057  0.110  0.238  0.524  1.128
ntt64 s  0.000  0.000  0.000  0.005  0.003  0.003  0.018  0.038  0.080  0.181  0.396
ntt64 l  0.000  0.016  0.000  0.000  0.016  0.020  0.044  0.082  0.159  0.366  0.804
Min_25 s 0.000  0.000  0.000  0.000  0.005  0.000  0.003  0.008  0.018  0.025  0.064
Min_25 l 0.000  0.000  0.000  0.000  0.000  0.004  0.008  0.016  0.027  0.063  0.142
libbf    0.000  0.000  0.000  0.016  0.000  0.016  0.031  0.035  0.080  0.191  0.397
ntl lm   0.000  0.000  0.000  0.000  0.000  0.025  0.018  0.035  0.080  0.157  0.353
ntl      0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.020  0.032  0.064  0.114
mod = 1000003
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.000  0.000  0.006  0.003  0.008  0.012  0.032  0.081  0.176
flint p  0.000  0.000  0.000  0.000  0.000  0.002  0.008  0.016  0.033  0.082  0.174
ntt32 s  0.000  0.002  0.003  0.004  0.009  0.012  0.045  0.072  0.159  0.333  0.732
ntt32 l  0.000  0.000  0.016  0.000  0.013  0.032  0.055  0.112  0.244  0.523  1.126
ntt64 s  0.000  0.000  0.000  0.002  0.005  0.000  0.018  0.037  0.083  0.183  0.398
ntt64 l  0.000  0.000  0.008  0.004  0.010  0.009  0.032  0.080  0.165  0.360  0.795
Min_25 s 0.000  0.000  0.000  0.000  0.000  0.000  0.004  0.018  0.016  0.037  0.079
Min_25 l 0.000  0.000  0.000  0.000  0.006  0.004  0.007  0.023  0.031  0.063  0.142
libbf    0.000  0.016  0.000  0.003  0.004  0.005  0.035  0.057  0.098  0.217  0.408
ntl lm   0.000  0.002  0.000  0.000  0.012  0.010  0.021  0.041  0.086  0.174  0.349
ntl      0.000  0.000  0.000  0.000  0.000  0.015  0.000  0.014  0.032  0.058  0.144
mod = 1000000007
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.000  0.000  0.009  0.003  0.012  0.018  0.048  0.136  0.278
flint p  0.000  0.000  0.000  0.000  0.000  0.010  0.000  0.032  0.064  0.130  0.281
ntt32 l  0.000  0.004  0.000  0.000  0.016  0.031  0.056  0.099  0.237  0.523  1.143
ntt64 l  0.000  0.002  0.000  0.000  0.016  0.015  0.050  0.066  0.175  0.388  0.837
Min_25 l 0.000  0.000  0.000  0.000  0.011  0.003  0.013  0.025  0.036  0.073  0.155
libbf    0.000  0.000  0.003  0.003  0.007  0.013  0.016  0.048  0.095  0.197  0.395
ntl lm   0.000  0.000  0.018  0.000  0.000  0.022  0.019  0.041  0.067  0.178  0.363
ntl      0.000  0.000  0.000  0.000  0.005  0.002  0.005  0.015  0.036  0.057  0.127
mod = 100000000003
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.000  0.000  0.000  0.006  0.009  0.016  0.055  0.176  0.367
flint p  0.000  0.000  0.000  0.000  0.000  0.000  0.014  0.032  0.055  0.162  0.367
ntt32 l  0.000  0.000  0.000  0.000  0.016  0.035  0.055  0.110  0.238  0.527  1.132
ntt64 l  0.000  0.000  0.000  0.016  0.010  0.018  0.034  0.078  0.173  0.371  0.806
Min_25 l 0.000  0.000  0.000  0.000  0.000  0.004  0.010  0.028  0.032  0.064  0.158
libbf    0.000  0.000  0.000  0.006  0.009  0.000  0.016  0.037  0.080  0.189  0.399
ntl lm   0.000  0.016  0.000  0.000  0.000  0.000  0.032  0.063  0.100  0.238  0.484
ntl      0.000  0.000  0.006  0.002  0.009  0.004  0.028  0.053  0.104  0.242  0.477
mod = 316227766016779
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.016  0.000  0.000  0.000  0.000  0.017  0.014  0.031  0.072  0.170  0.355
flint p  0.000  0.000  0.000  0.012  0.004  0.011  0.000  0.023  0.063  0.161  0.349
ntt64 l  0.000  0.000  0.000  0.018  0.011  0.016  0.046  0.077  0.160  0.388  0.806
Min_25 l 0.000  0.000  0.000  0.000  0.013  0.003  0.015  0.028  0.033  0.064  0.143
libbf    0.000  0.002  0.000  0.002  0.004  0.003  0.040  0.046  0.099  0.190  0.383
ntl lm   0.000  0.000  0.000  0.000  0.000  0.015  0.025  0.048  0.124  0.247  0.524
ntl      0.000  0.000  0.000  0.016  0.000  0.003  0.016  0.071  0.122  0.256  0.535
End PolyMulPerformanceTest
Time usage 0:00:00:45.606
time usage: 0:00:01:14.757
```
