# Benchmark

## Ntt benchmark

### Test Environment:

* Date: 2019.10.13
* OS:  Win10 Pro 1903 (18362.418)
* CPU: [i9-9900K](https://en.wikichip.org/wiki/intel/core_i9/i9-9900k)
* Compiler: gcc version 9.2.0 (Rev2, Built by MSYS2 project)
* Msys2: msys2-x86_64-20190524
* Test code: [Ntt test](https://github.com/baihacker/pe/blob/master/test/ntt_test.c)
* Build:
  * [Build and use third party library in pe](https://github.com/baihacker/pe/blob/master/libraries_on_win64.md#build-and-use-third-party-library-in-pe)
  * Build test target:
  > -o a.exe --std=c++14 -fno-diagnostics-color -O3 -march=native -mtune=native -fopenmp -Wl,--stack,268435456 -static -s -lbf -lgmpxx -lflint -lmpfr -lntl -lgmp

### Test result

#### Openmp enabled
```cpp
ntt test : data = random, size = 1, n = 1000000, mod = 100019
flint n  : 0.305
flint p  : 1.045
ntt32 s  : 0.822
ntt32 l  : 0.885
ntt64 s  : 1.377
ntt64 l  : 1.438
Min_25 s : 0.112
Min_25 l : 0.127
libbf    : 0.641
ntl      : 0.563
ntt test : data = random, size = 3, n = 1479725, mod = 100000000003
flint n  : 0.927
flint p  : 2.667
ntt32 l  : 1.784
ntt64 l  : 2.871
Min_25 l : 0.258
libbf    : 1.084
ntl      : 1.233
ntt test : data = random, size = 4, n = 1000000, mod = 316227766016779
flint n  : 0.631
flint p  : 1.884
ntt64 l  : 1.445
Min_25 l : 0.132
libbf    : 0.679
ntl      : 0.914
ntt test : data = max mod, size = 1, n = 999996, mod = 1000003
flint n  : 0.314
flint p  : 1.097
ntt32 s  : 0.825
ntt32 l  : 0.876
ntt64 s  : 1.362
ntt64 l  : 1.420
Min_25 s : 0.114
Min_25 l : 0.128
libbf    : 0.643
ntl      : 0.566
ntt test : data = max mod, size = 3, n = 1479725, mod = 100000000003
flint n  : 0.926
flint p  : 2.545
ntt32 l  : 1.761
ntt64 l  : 2.869
Min_25 l : 0.255
libbf    : 1.094
ntl      : 1.229
ntt test : data = max mod, size = 4, n = 1000000, mod = 316227766016779
flint n  : 0.627
flint p  : 1.891
ntt64 l  : 1.423
Min_25 l : 0.134
libbf    : 0.682
ntl      : 0.920

mod = 100019
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.001  0.001  0.002  0.004  0.012  0.029  0.058  0.161  0.318
flint p  0.000  0.002  0.003  0.007  0.014  0.028  0.059  0.124  0.253  0.531  1.105
ntt32 s  0.001  0.002  0.003  0.007  0.014  0.032  0.049  0.102  0.206  0.412  0.825
ntt32 l  0.001  0.002  0.004  0.009  0.017  0.035  0.052  0.113  0.216  0.453  0.888
ntt64 s  0.001  0.002  0.006  0.012  0.026  0.054  0.082  0.167  0.338  0.678  1.377
ntt64 l  0.002  0.003  0.006  0.013  0.026  0.055  0.082  0.174  0.351  0.708  1.436
Min_25 s 0.000  0.000  0.000  0.001  0.001  0.003  0.007  0.013  0.026  0.055  0.115
Min_25 l 0.000  0.000  0.000  0.001  0.002  0.006  0.010  0.016  0.031  0.061  0.130
libbf    0.000  0.001  0.001  0.004  0.009  0.018  0.044  0.072  0.149  0.307  0.650
ntl      0.000  0.001  0.001  0.004  0.008  0.016  0.031  0.066  0.137  0.283  0.579
mod = 1000003
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.000  0.001  0.003  0.007  0.015  0.029  0.077  0.152  0.316
flint p  0.000  0.002  0.003  0.006  0.014  0.029  0.061  0.130  0.259  0.528  1.105
ntt32 s  0.001  0.002  0.002  0.008  0.017  0.033  0.048  0.103  0.203  0.406  0.823
ntt32 l  0.001  0.002  0.003  0.007  0.016  0.033  0.051  0.121  0.223  0.438  0.869
ntt64 s  0.002  0.003  0.006  0.012  0.026  0.055  0.081  0.166  0.336  0.682  1.380
ntt64 l  0.001  0.003  0.007  0.012  0.026  0.055  0.084  0.172  0.352  0.710  1.434
Min_25 s 0.002  0.000  0.000  0.000  0.001  0.003  0.007  0.012  0.026  0.054  0.115
Min_25 l 0.000  0.000  0.001  0.002  0.003  0.006  0.011  0.016  0.030  0.061  0.131
libbf    0.000  0.002  0.001  0.003  0.008  0.020  0.044  0.071  0.148  0.309  0.657
ntl      0.001  0.001  0.002  0.004  0.007  0.016  0.030  0.065  0.138  0.283  0.579
mod = 1000000007
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.001  0.002  0.004  0.009  0.018  0.046  0.100  0.243  0.517
flint p  0.001  0.003  0.005  0.010  0.020  0.042  0.090  0.184  0.386  0.830  1.703
ntt32 l  0.002  0.002  0.004  0.008  0.016  0.035  0.053  0.118  0.235  0.440  0.886
ntt64 l  0.002  0.004  0.007  0.011  0.027  0.058  0.086  0.184  0.358  0.707  1.443
Min_25 l 0.000  0.000  0.001  0.003  0.004  0.008  0.013  0.021  0.035  0.065  0.136
libbf    0.000  0.001  0.002  0.004  0.009  0.021  0.046  0.075  0.158  0.328  0.687
ntl      0.000  0.001  0.001  0.005  0.007  0.015  0.031  0.066  0.139  0.287  0.585
mod = 100000000003
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.001  0.002  0.004  0.010  0.022  0.045  0.098  0.301  0.647
flint p  0.001  0.003  0.005  0.010  0.022  0.044  0.091  0.192  0.397  0.832  1.741
ntt32 l  0.001  0.002  0.004  0.008  0.017  0.035  0.053  0.114  0.224  0.447  0.891
ntt64 l  0.001  0.003  0.006  0.012  0.027  0.056  0.085  0.176  0.360  0.710  1.448
Min_25 l 0.000  0.001  0.001  0.001  0.004  0.008  0.013  0.023  0.036  0.064  0.135
libbf    0.001  0.001  0.002  0.004  0.008  0.021  0.046  0.076  0.157  0.329  0.686
ntl      0.001  0.001  0.003  0.005  0.011  0.022  0.046  0.098  0.202  0.413  0.846
mod = 316227766016779
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.001  0.002  0.006  0.012  0.029  0.072  0.153  0.299  0.629
flint p  0.001  0.003  0.005  0.011  0.022  0.049  0.105  0.210  0.430  0.916  1.921
ntt64 l  0.002  0.003  0.006  0.011  0.028  0.058  0.086  0.176  0.355  0.713  1.446
Min_25 l 0.001  0.000  0.001  0.002  0.004  0.008  0.013  0.020  0.034  0.066  0.135
libbf    0.001  0.001  0.002  0.004  0.009  0.021  0.047  0.076  0.158  0.328  0.709
ntl      0.001  0.001  0.003  0.006  0.013  0.025  0.052  0.109  0.225  0.475  0.944
```

#### Openmp disabled (option "-fopenmp" removed)
```cpp
ntt test : data = random, size = 1, n = 1000000, mod = 100019
flint n  : 0.304
flint p  : 1.032
ntt32 s  : 2.641
ntt32 l  : 4.084
ntt64 s  : 2.321
ntt64 l  : 4.626
Min_25 s : 0.121
Min_25 l : 0.264
libbf    : 0.649
ntl      : 0.562
ntt test : data = random, size = 3, n = 1479725, mod = 100000000003
flint n  : 0.928
flint p  : 2.645
ntt32 l  : 8.704
ntt64 l  : 9.810
Min_25 l : 0.618
libbf    : 1.103
ntl      : 1.228
ntt test : data = random, size = 4, n = 1000000, mod = 316227766016779
flint n  : 0.626
flint p  : 1.881
ntt64 l  : 4.689
Min_25 l : 0.333
libbf    : 0.691
ntl      : 0.909
ntt test : data = max mod, size = 1, n = 999996, mod = 1000003
flint n  : 0.314
flint p  : 1.095
ntt32 s  : 2.637
ntt32 l  : 4.084
ntt64 s  : 2.281
ntt64 l  : 4.583
Min_25 s : 0.123
Min_25 l : 0.265
libbf    : 0.653
ntl      : 0.561
ntt test : data = max mod, size = 3, n = 1479725, mod = 100000000003
flint n  : 0.930
flint p  : 2.507
ntt32 l  : 8.648
ntt64 l  : 9.795
Min_25 l : 0.614
libbf    : 1.103
ntl      : 1.222
ntt test : data = max mod, size = 4, n = 1000000, mod = 316227766016779
flint n  : 0.630
flint p  : 1.866
ntt64 l  : 4.630
Min_25 l : 0.332
libbf    : 0.690
ntl      : 0.909

mod = 100019
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.001  0.001  0.001  0.002  0.006  0.012  0.029  0.059  0.160  0.319
flint p  0.001  0.002  0.003  0.007  0.013  0.028  0.058  0.121  0.251  0.531  1.099
ntt32 s  0.001  0.003  0.006  0.014  0.030  0.062  0.133  0.280  0.589  1.248  2.639
ntt32 l  0.002  0.005  0.010  0.022  0.046  0.096  0.207  0.434  0.915  1.936  4.088
ntt64 s  0.001  0.002  0.006  0.012  0.025  0.055  0.117  0.247  0.521  1.102  2.325
ntt64 l  0.003  0.006  0.011  0.024  0.051  0.109  0.233  0.492  1.034  2.195  4.631
Min_25 s 0.000  0.000  0.001  0.001  0.001  0.003  0.007  0.014  0.028  0.060  0.124
Min_25 l 0.000  0.000  0.000  0.002  0.003  0.006  0.014  0.030  0.061  0.129  0.269
libbf    0.001  0.000  0.002  0.004  0.008  0.020  0.044  0.072  0.149  0.312  0.657
ntl      0.001  0.000  0.002  0.005  0.007  0.015  0.031  0.066  0.136  0.280  0.579
mod = 1000003
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.001  0.002  0.003  0.006  0.014  0.028  0.077  0.152  0.317
flint p  0.001  0.001  0.003  0.006  0.014  0.029  0.061  0.126  0.257  0.518  1.087
ntt32 s  0.001  0.003  0.006  0.013  0.030  0.063  0.133  0.280  0.590  1.250  2.640
ntt32 l  0.002  0.004  0.010  0.021  0.045  0.097  0.206  0.435  0.916  1.938  4.093
ntt64 s  0.001  0.003  0.006  0.012  0.025  0.054  0.117  0.247  0.523  1.107  2.334
ntt64 l  0.002  0.005  0.011  0.024  0.050  0.110  0.233  0.492  1.038  2.194  4.650
Min_25 s 0.001  0.000  0.001  0.001  0.002  0.003  0.007  0.014  0.028  0.060  0.126
Min_25 l 0.000  0.000  0.001  0.002  0.003  0.006  0.014  0.030  0.061  0.134  0.271
libbf    0.000  0.001  0.002  0.004  0.008  0.020  0.045  0.073  0.150  0.312  0.650
ntl      0.001  0.000  0.002  0.004  0.007  0.015  0.031  0.067  0.138  0.283  0.580
mod = 1000000007
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.001  0.001  0.004  0.009  0.018  0.046  0.101  0.242  0.520
flint p  0.001  0.003  0.005  0.010  0.019  0.042  0.090  0.182  0.383  0.824  1.708
ntt32 l  0.002  0.004  0.010  0.022  0.046  0.098  0.209  0.439  0.923  1.954  4.112
ntt64 l  0.002  0.005  0.011  0.024  0.052  0.111  0.237  0.499  1.053  2.223  4.697
Min_25 l 0.000  0.001  0.001  0.002  0.004  0.008  0.018  0.038  0.077  0.161  0.331
libbf    0.000  0.001  0.002  0.004  0.009  0.021  0.047  0.077  0.158  0.328  0.705
ntl      0.000  0.001  0.002  0.004  0.008  0.015  0.032  0.067  0.139  0.287  0.588
mod = 100000000003
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.000  0.002  0.005  0.010  0.022  0.045  0.098  0.302  0.650
flint p  0.001  0.003  0.004  0.010  0.021  0.044  0.090  0.188  0.393  0.826  1.728
ntt32 l  0.002  0.005  0.010  0.021  0.046  0.098  0.209  0.439  0.923  1.952  4.119
ntt64 l  0.002  0.005  0.011  0.024  0.051  0.111  0.237  0.499  1.052  2.224  4.693
Min_25 l 0.000  0.000  0.001  0.001  0.004  0.008  0.018  0.037  0.077  0.159  0.331
libbf    0.001  0.001  0.002  0.004  0.009  0.021  0.047  0.077  0.158  0.328  0.690
ntl      0.001  0.002  0.002  0.005  0.011  0.022  0.047  0.099  0.203  0.418  0.849
mod = 316227766016779
log2(n)  10     11     12     13     14     15     16     17     18     19     20
flint n  0.000  0.000  0.001  0.002  0.006  0.013  0.029  0.072  0.154  0.301  0.632
flint p  0.001  0.003  0.006  0.011  0.023  0.049  0.104  0.210  0.431  0.921  1.915
ntt64 l  0.003  0.005  0.011  0.024  0.052  0.111  0.237  0.501  1.053  2.227  4.706
Min_25 l 0.000  0.001  0.000  0.002  0.004  0.008  0.018  0.037  0.077  0.169  0.339
libbf    0.000  0.001  0.001  0.005  0.009  0.022  0.046  0.077  0.159  0.330  0.696
ntl      0.001  0.001  0.003  0.006  0.012  0.025  0.052  0.110  0.225  0.463  0.947
```
